<!doctype html>
<html lang="de">
  <head>
    <meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pumpensteuerung</title>
		<link rel="stylesheet" href="mystyle.css" type="text/css">
	<script>

		var Pumpe;
		var Ventil1;
		var Ventil2;

		window.addEventListener('load', GETP());

		function GETP() {
			Pumpe=localStorage.getItem('Pumpe_Status');
			Ventil1=localStorage.getItem('Ventil1_Status');
			Ventil2=localStorage.getItem('Ventil2_Status');
		}

		function set_valves() {
			GETP();
			/*alert('Start Pumpe ist:'+window.Pumpe+' Ventil 1 ist:'+window.Ventil1+' Ventil 2 ist:'+window.Ventil2);*/
			if ( window.Pumpe == 'true') {
				document.getElementById("Pumpe").checked=true;
			}
			if ( window.Ventil1 == 'true') {
				document.getElementById("Ventil_1").checked=true;
			}
			if ( window.Ventil2 == 'true') {
				document.getElementById("Ventil_2").checked=true;
			}

		}

		function check_valves() {
			var p = document.getElementById("Pumpe").checked;
			var v1 = document.getElementById("Ventil_1").checked;
			var v2 = document.getElementById("Ventil_2").checked;
			localStorage.setItem("Pumpe_Status", p );
			localStorage.setItem("Ventil1_Status",v1 );
			localStorage.setItem("Ventil2_Status",v2 );
			window.location.href="cgi-bin/setze_Pumpenstatus.py?Pumpe="+p+"&Ventil1="+v1+"&Ventil2="+v2;
		}

		</script>
	</head>
  <body>
	<header>
		<h1>Pumpensteuerung</h1>
	</header>
	<main>
		<form onchange="check_valves()" >
		<div class="toggle text">
			<label> Pumpe
				<input type="checkbox" id="Pumpe"> <span class="slider"></span> </label>
			<label> Ventil 1
				<input type="checkbox" id="Ventil_1"> <span class="slider"></span> </label>
			<label> Ventil 2
				<input type="checkbox" id="Ventil_2"> <span class="slider"></span> </label>
		</div>
		</form>
	</main>
	<footer>
		<a href="/index.html">Hauptmenu</a>
	</footer>
	<script>
		set_valves();
	</script>
  </body>
</html>